using namespace std;

#include <iostream>

int main()
{
	int M[30][30], M1 [30][30];
	int n = 30;
	int i, j, k, count;
	for (i = 0; i < 30; i++) {
		for (j = 0; j < 30; j++) {
			M[i][j] = rand() % 2;
			if (M[i][j])
				cout << "*";
			else cout << " ";
		}
		cout << endl;
	}
	cout << endl;
	cout << "________________"<<endl;
	cout << endl;
	for (k = 0; k < 80; k++) {  // kilkist shagov, 0 -- 1
		for (i = 0; i < 30; i++) {
			for (j = 0; j < 30; j++) {
				count = 0;
				if (M[i - 1][j] and i>0)
					count++;
				if (M[i - 1][j+1] and i > 0 and j<(n-1))
					count++;
				if (M[i][j+1] and j<(n-1))
					count++;
				if (M[i + 1][j+1] and i< (n - 1) and j < (n - 1))
					count++;
				if (M[i + 1][j] and i < (n - 1))
					count++;
				if (M[i + 1][j-1] and i < (n - 1) and j>0)
					count++;
				if (M[i][j-1] and j > 0)
					count++;
				if (M[i - 1][j-1] and i > 0 and j>0)
					count++;
				M1[i][j] = M[i][j];
				if (M[i][j] and count != 2 and count != 3)
					M1[i][j] = 0;
				if (!M[i][j] and count == 3)
					M1[i][j] = 1;
			}
		}
		for (i = 0; i < 30; i++) {
			for (j = 0; j < 30; j++) {
				M[i][j] = M1[i][j];
				if (M[i][j])
					cout << "*";
				else cout << " ";
			}
			cout << endl;
		}
		cout << endl;
		cout << "________________" << endl;
		cout << endl;
	}
}
